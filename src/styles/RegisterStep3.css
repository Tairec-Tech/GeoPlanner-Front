/* Estilos básicos de Cropper.js (sin cambios) */
.cropper-container {
  direction: ltr;
  font-size: 0;
  line-height: 0;
  position: relative;
  touch-action: none;
  user-select: none;
  max-width: 100%;
  max-height: 100%;
}

.cropper-container img {
  display: block;
  height: 100%;
  width: 100%;
  image-orientation: 0deg;
  min-height: 0 !important;
  min-width: 0 !important;
  object-fit: cover; /* Hace que la imagen cubra todo el contenedor, ajustándose según la dimensión más grande */
  object-position: center; /* Centra la imagen */
}
.cropper-wrap-box, .cropper-canvas, .cropper-drag-box, .cropper-crop-box, .cropper-modal {
  bottom: 0;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
}
.cropper-wrap-box { overflow: hidden; }
.cropper-drag-box { background-color: #fff; opacity: 0; }
.cropper-view-box {
  display: block;
  height: 100%;
  outline-color: rgba(56, 189, 248, 0.8);
  outline: 2px solid #38bdf8;
  overflow: hidden;
  width: 100%;
}
.cropper-dashed { border: 0 dashed #fff; display: block; opacity: .5; position: absolute; }
.cropper-dashed.dashed-h { border-bottom-width: 1px; border-top-width: 1px; height: calc(100% / 3); left: 0; top: calc(100% / 3); width: 100%; }
.cropper-dashed.dashed-v { border-left-width: 1px; border-right-width: 1px; height: 100%; left: calc(100% / 3); top: 0; width: calc(100% / 3); }
.cropper-center { display: block; height: 0; left: 50%; opacity: .75; position: absolute; top: 50%; width: 0; }
.cropper-center::before, .cropper-center::after { background-color: #fff; content: ' '; display: block; position: absolute; }
.cropper-center::before { height: 1px; left: -3px; top: 0; width: 7px; }
.cropper-center::after { height: 7px; left: 0; top: -3px; width: 1px; }
.cropper-face, .cropper-line, .cropper-point { display: block; height: 100%; opacity: .1; position: absolute; width: 100%; }
.cropper-line { background-color: #39f; }
.cropper-line.line-e { cursor: e-resize; right: -3px; top: 0; width: 5px; }
.cropper-line.line-n { cursor: n-resize; height: 5px; left: 0; top: -3px; }
.cropper-line.line-w { cursor: w-resize; left: -3px; top: 0; width: 5px; }
.cropper-line.line-s { bottom: -3px; cursor: s-resize; height: 5px; left: 0; }
.cropper-point { background-color: #39f; height: 5px; opacity: .75; width: 5px; }
.cropper-point.point-e { cursor: e-resize; margin-top: -3px; right: -3px; top: 50%; }
.cropper-point.point-n { cursor: n-resize; left: 50%; margin-left: -3px; top: -3px; }
.cropper-point.point-w { cursor: w-resize; left: -3px; margin-top: -3px; top: 50%; }
.cropper-point.point-s { bottom: -3px; cursor: s-resize; left: 50%; margin-left: -3px; }
.cropper-point.point-ne { cursor: ne-resize; right: -3px; top: -3px; }
.cropper-point.point-nw { cursor: nw-resize; left: -3px; top: -3px; }
.cropper-point.point-sw { bottom: -3px; cursor: sw-resize; left: -3px; }
.cropper-point.point-se { bottom: -3px; cursor: se-resize; right: -3px; }
.cropper-hide { display: none !important; }
.cropper-move { cursor: move; }
.cropper-crop { cursor: crosshair; }
.cropper-disabled .cropper-drag-box, .cropper-disabled .cropper-face, .cropper-disabled .cropper-line, .cropper-disabled .cropper-point { cursor: not-allowed; }

/* --- ESTILOS ACTUALIZADOS PARA EL MODAL DEL CROPPER --- */

/* Fondo del modal para que ocupe toda la pantalla */
.modal.modal-open {
  background-color: rgba(0, 0, 0, 0.7); /* Fondo oscuro semitransparente */
}

/* Contenedor principal del modal (la caja blanca) */
.modal-box.cropper-modal-container {
  width: auto; /* Se ajusta al contenido */
  min-width: 300px; /* Ancho mínimo */
  min-height: 10px; /* Ancho mínimo */
  max-width: 45vw; /* Ancho máximo del 45% de la pantalla (antes era 60%) */
  max-height: 100vh; /* Altura máxima del 80% de la pantalla (antes era 70%) */
  padding: 1.5rem;
  background-color: #2d3748; /* Fondo oscuro para el modal */
  color: white; /* Texto blanco */
  border-radius: 1rem;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

/* Wrapper que contiene la instancia de Cropper.js */
.cropper-wrapper {
  flex-grow: 1; /* Ocupa el espacio vertical disponible */
  min-height: 0; /* Necesario para que flex-grow funcione correctamente en una columna flex */
  margin-bottom: 1.5rem; /* Espacio antes de los botones */
  border-radius: 0.5rem;
  overflow: hidden; /* Mantiene la imagen dentro de los bordes redondeados */
  background-color: #1a202c; /* Fondo muy oscuro para el área del cropper */
  display: flex;
  align-items: center;
  justify-content: center;
  max-height: 350px; /* Altura máxima específica para el cropper (reducida de 500px) */
  max-width: 400px; /* Ancho máximo específico para el cropper */
  margin: 0 auto; /* Centrar el contenedor */
}

/* El overlay oscuro que cubre la imagen fuera del área de recorte */
.cropper-modal {
  background-color: #000;
  opacity: 0.75 !important; /* Aumentamos la opacidad para un mayor contraste */
}

/* La cara del área de recorte (la que se arrastra). Debe ser transparente. */
.cropper-face {
  background-color: transparent !important;
}


/* --- ESTILOS GENERALES DE LA PÁGINA --- */
.register-page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: #f8f9fa;
  padding-bottom: 80px; /* Espacio para el footer fijo */
}

.register-main {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem 1rem;
  margin-bottom: 80px; /* Espacio adicional para evitar que el contenido se superponga al footer */
}

.register-container-wide {
  background: white;
  padding: 2.5rem;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 700px;
  margin: 0 auto;
  color: #333;
  position: relative;
  overflow: hidden;
}

.register-container-wide::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 123, 255, 0.05);
  border-radius: 20px;
  pointer-events: none;
}

.logo-drop { 
  text-align: center; 
  margin-bottom: 2rem; 
}

.logo-spin { 
  width: 80px; 
  height: 80px; 
  animation: spinY 3s linear infinite; 
  transform-style: preserve-3d; 
}

@keyframes spinY {
  0% { transform: rotateY(0deg); }
  100% { transform: rotateY(360deg); }
}

.custom-file-input-container { 
  position: relative; 
  display: inline-block; 
  width: 100%; 
  margin: 1rem 0; 
}

.custom-file-input { 
  position: absolute; 
  left: -9999px; 
  opacity: 0; 
  pointer-events: none; 
}

.custom-file-label { 
  display: inline-flex; 
  align-items: center; 
  justify-content: center; 
  gap: 0.5rem; 
  padding: 0.75rem 1.5rem; 
  background: white; 
  border: 2px dashed #ddd; 
  border-radius: 12px; 
  color: #666; 
  font-size: 1rem; 
  font-weight: 500; 
  cursor: pointer; 
  transition: all 0.3s ease; 
  width: 100%; 
  min-height: 50px; 
}

.custom-file-label:hover { 
  background: #f8f9fa; 
  border-color: #007BFF; 
  color: #007BFF; 
  transform: translateY(-2px); 
}

.custom-file-label:active { 
  transform: translateY(0); 
}

.file-icon { 
  font-size: 1.25rem; 
}

.avatar { 
  display: flex; 
  justify-content: center; 
  margin-bottom: 1rem; 
}

.map-container { 
  border-radius: 10px; 
  overflow: hidden; 
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  position: relative;
  z-index: 1; /* Asegurar que el mapa esté por debajo del modal */
}

/* Footer fijo en la parte inferior */
.footer-bar { 
  background: white; 
  color: #333; 
  padding: 0.5rem 0; 
  position: fixed; 
  bottom: 0; 
  left: 0; 
  right: 0; 
  z-index: 50; /* Menor que el modal pero mayor que el contenido */
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
}

.footer-text { 
  font-size: 0.875rem; 
  opacity: 0.8; 
}

.footer-links { 
  display: flex; 
  gap: 1rem; 
}

.footer-link { 
  color: #333; 
  text-decoration: none; 
  opacity: 0.8; 
  transition: opacity 0.3s ease; 
}

.footer-link:hover { 
  opacity: 1; 
}

.btn-custom { 
  background: linear-gradient(145deg, #00bfff, #0099cc); 
  border: none; 
  color: white; 
  font-weight: 600; 
  padding: 0.75rem 2rem; 
  border-radius: 12px; 
  transition: all 0.3s ease; 
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3); 
}

.btn-custom:hover { 
  transform: translateY(-2px); 
  box-shadow: 0 6px 16px rgba(0, 123, 255, 0.4); 
}

.btn-custom:active { 
  transform: translateY(0); 
}

.register-container-wide .textarea, 
.register-container-wide .input, 
.register-container-wide .select { 
  background-color: white !important; 
  color: #333 !important; 
  border: 1px solid #ddd !important; 
}

.register-container-wide .textarea::placeholder, 
.register-container-wide .input::placeholder { 
  color: #666 !important; 
}

.register-container-wide .select option { 
  background-color: white !important; 
  color: #333 !important; 
}

.modal-action { 
  justify-content: center; 
  width: 100%; 
  gap: 1rem; 
}

/* Asegurar que el modal esté por encima de todo */
.modal.modal-open {
  z-index: 1000 !important;
}

.modal-box {
  z-index: 1001 !important;
}

/* Ocultar controles del mapa cuando el modal está abierto */
.modal.modal-open .leaflet-control-zoom {
  display: none !important;
}

.modal.modal-open .leaflet-control-attribution {
  display: none !important;
}

/* Asegurar que los controles del mapa estén por debajo del modal */
.leaflet-control-zoom {
  z-index: 100 !important;
}

.leaflet-control-attribution {
  z-index: 100 !important;
}

@media (max-width: 768px) {
  .register-container-wide { 
    padding: 1.5rem; 
    margin: 1rem; 
  }
  
  .custom-file-label { 
    padding: 0.5rem 1rem; 
    font-size: 0.9rem; 
  }
}
